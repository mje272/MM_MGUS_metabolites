{% extends 'base.html' %}

{% block head %}
    <title>Home</title>
    <script>
        const metabolite_dict = { //generate this from the online database ?
            "Lipid": {
                "Fatty Acid, Branched": [
                    "(12 or 13)-methylmyristate (a15:0 or i15:0)",
                    "(14 or 15)-methylpalmitate (a17:0 or i17:0)",
                    "(16 or 17)-methylstearate (a19:0 or i19:0)"
                ],
                "Fatty Acid Metabolism (Acyl Carnitine, Hydroxy)": [
                    "(R)-3-hydroxybutyrylcarnitine",
                    "(S)-3-hydroxybutyrylcarnitine",
                    "3-hydroxydecanoylcarnitine",
                    "3-hydroxyoleoylcarnitine"
                ],
                "Lysophospholipid": [
                    "1-linoleoyl-GPA (18:2)*",
                    "1-linoleoyl-GPG (18:2)*",
                    "1-oleoyl-GPG (18:1)*",
                    "1-oleoyl-GPS (18:1)",
                    "1-palmitoyl-GPG (16:0)*"
                ],
                "Phosphatidylserine (PS)": [
                    "1-stearoyl-2-arachidonoyl-GPS (18:0/20:4)",
                    "1-stearoyl-2-oleoyl-GPS (18:0/18:1)"
                ],
                "Phosphatidylglycerol (PG)": [
                    "1-stearoyl-2-oleoyl-GPG (18:0/18:1)"
                ],
                "Long Chain Monounsaturated Fatty Acid": [
                    "10-heptadecenoate (17:1n7)",
                    "10-nonadecenoate (19:1n9)",
                    "eicosenoate (20:1)",
                    "erucate (22:1n9)",
                    "myristoleate (14:1n5)",
                    "oleate/vaccenate (18:1)",
                    "palmitoleate (16:1n7)"
                ],
                "Medium Chain Fatty Acid": [
                    "10-undecenoate (11:1n1)",
                    "5-dodecenoate (12:1n7)",
                    "caprate (10:0)",
                    "caproate (6:0)",
                    "caprylate (8:0)",
                    "cis-4-decenoate (10:1n6)*",
                    "laurate (12:0)",
                    "undecanoate (11:0)"
                ],
                "Androgenic Steroids": [
                    "11beta-hydroxyandrosterone glucuronide",
                    "16a-hydroxy DHEA 3-sulfate",
                    "5alpha-androstan-3alpha,17beta-diol disulfate",
                    "5alpha-androstan-3alpha,17beta-diol monosulfate (1)",
                    "5alpha-androstan-3alpha,17beta-diol monosulfate (2)",
                    "5alpha-androstan-3beta,17alpha-diol disulfate",
                    "5alpha-androstan-3beta,17beta-diol disulfate",
                    "androstenediol (3alpha, 17alpha) monosulfate (3)",
                    "androstenediol (3beta,17beta) disulfate (1)",
                    "androstenediol (3beta,17beta) disulfate (2)",
                    "androstenediol (3beta,17beta) monosulfate (1)",
                    "androstenediol (3beta,17beta) monosulfate (2)",
                    "androsterone glucuronide",
                    "androsterone sulfate",
                    "dehydroepiandrosterone sulfate (DHEA-S)",
                    "epiandrosterone sulfate",
                    "etiocholanolone glucuronide"
                ],
                "Fatty Acid, Dihydroxy": [
                    "12,13-DiHOME",
                    "2R,3R-dihydroxybutyrate",
                    "2S,3R-dihydroxybutyrate",
                    "3,4-dihydroxybutyrate",
                    "9,10-DiHOME"
                ],
                "Eicosanoid": [
                    "12-HETE"
                ],
                "Fatty Acid, Monohydroxy": [
                    "13-HODE + 9-HODE",
                    "16-hydroxypalmitate",
                    "2-hydroxybehenate",
                    "2-hydroxydecanoate",
                    "2-hydroxylaurate",
                    "2-hydroxynervonate*",
                    "2-hydroxyoctanoate",
                    "2-hydroxyoleate",
                    "2-hydroxypalmitate",
                    "2-hydroxystearate",
                    "3-hydroxydecanoate",
                    "3-hydroxyhexanoate",
                    "3-hydroxylaurate",
                    "3-hydroxymyristate",
                    "3-hydroxyoctanoate",
                    "3-hydroxyoleate*",
                    "3-hydroxypalmitate",
                    "3-hydroxysebacate",
                    "3-hydroxystearate",
                    "7-hydroxyoctanoate",
                    "9-hydroxystearate"
                ],
                "Pregnenolone Steroids": [
                    "17alpha-hydroxypregnanolone glucuronide",
                    "21-hydroxypregnenolone disulfate",
                    "pregnenediol disulfate (C21H34O8S2)*",
                    "pregnenediol sulfate (C21H34O5S)*",
                    "pregnenetriol disulfate*",
                    "pregnenetriol sulfate*",
                    "pregnenolone sulfate"
                ],
                "Fatty Acid, Amino": [
                    "2-aminoheptanoate",
                    "2-aminooctanoate",
                    "N-acetyl-2-aminooctanoate*"
                ],
                "Fatty Acid, Dicarboxylate": [
                    "2-hydroxyadipate",
                    "2-hydroxyglutarate",
                    "2-hydroxysebacate",
                    "3-carboxy-4-methyl-5-pentyl-2-furanpropionate (3-CMPFP)**",
                    "3-carboxy-4-methyl-5-propyl-2-furanpropanoate (CMPF)",
                    "3-hydroxyadipate*",
                    "3-hydroxydodecanedioate*",
                    "3-methyladipate",
                    "3-methylglutarate/2-methylglutarate",
                    "4-hydroxy-2-oxoglutaric acid",
                    "adipate (C6-DC)",
                    "azelate (C9-DC)",
                    "branched chain 14:0 dicarboxylic acid**",
                    "docosadioate (C22-DC)",
                    "dodecadienoate (12:2)*",
                    "dodecanedioate (C12-DC)",
                    "eicosanedioate (C20-DC)",
                    "eicosenedioate (C20:1-DC)*",
                    "glutarate (C5-DC)",
                    "heptenedioate (C7:1-DC)*",
                    "hexadecanedioate (C16-DC)",
                    "hexadecenedioate (C16:1-DC)*",
                    "hydroxy-CMPF*",
                    "maleate",
                    "nonenedioate (C9:1-DC)*",
                    "octadecadienedioate (C18:2-DC)*",
                    "octadecanedioate (C18-DC)",
                    "octadecenedioate (C18:1-DC)*",
                    "pimelate (C7-DC)",
                    "sebacate (C10-DC)",
                    "suberate (C8-DC)",
                    "tetradecadienedioate (C14:2-DC)*",
                    "tetradecanedioate (C14-DC)",
                    "tridecenedioate (C13:1-DC)*"
                ],
                "Fatty Acid Synthesis": [
                    "2-methylmalonylcarnitine (C4-DC)",
                    "malonylcarnitine"
                ],
                "Fatty Acid Metabolism (Acyl Carnitine, Monounsaturated)": [
                    "3-decenoylcarnitine",
                    "5-dodecenoylcarnitine (C12:1)",
                    "cis-4-decenoylcarnitine (C10:1)",
                    "eicosenoylcarnitine (C20:1)*",
                    "erucoylcarnitine (C22:1)*",
                    "myristoleoylcarnitine (C14:1)*",
                    "nervonoylcarnitine (C24:1)*",
                    "oleoylcarnitine (C18:1)",
                    "palmitoleoylcarnitine (C16:1)*",
                    "ximenoylcarnitine (C26:1)*"
                ],
                "Mevalonate Metabolism": [
                    "3-hydroxy-3-methylglutarate"
                ],
                "Ketone Bodies": [
                    "3-hydroxybutyrate (BHBA)",
                    "acetoacetate"
                ],
                "Fatty Acid Metabolism (Acyl Glycine)": [
                    "3-hydroxybutyroylglycine**",
                    "hexanoylglycine",
                    "N-palmitoylglycine",
                    "picolinoylglycine"
                ],
                "Sterol": [
                    "3beta,7alpha-dihydroxy-5-cholestenoate",
                    "3beta-hydroxy-5-cholestenoate",
                    "4-cholesten-3-one",
                    "7-alpha-hydroxy-3-oxo-4-cholestenoate (7-Hoca)",
                    "beta-sitosterol",
                    "campesterol",
                    "cholesterol"
                ],
                "Progestin Steroids": [
                    "5alpha-pregnan-3beta,20alpha-diol disulfate",
                    "5alpha-pregnan-3beta,20alpha-diol monosulfate (2)",
                    "5alpha-pregnan-3beta,20beta-diol monosulfate (1)",
                    "pregnanediol-3-glucuronide"
                ],
                "Fatty Acid Metabolism (Acyl Carnitine, Short Chain)": [
                    "acetylcarnitine (C2)"
                ],
                "Fatty Acid Metabolism (Acyl Carnitine, Dicarboxylate)": [
                    "adipoylcarnitine (C6-DC)",
                    "octadecanedioylcarnitine (C18-DC)*",
                    "octadecenedioylcarnitine (C18:1-DC)*",
                    "pimeloylcarnitine/3-methyladipoylcarnitine (C7-DC)",
                    "suberoylcarnitine (C8-DC)"
                ],
                "Long Chain Polyunsaturated Fatty Acid (n3 and n6)": [
                    "adrenate (22:4n6)",
                    "arachidonate (20:4n6)",
                    "dihomo-linoleate (20:2n6)",
                    "dihomo-linolenate (20:3n3 or n6)",
                    "docosadienoate (22:2n6)",
                    "docosahexaenoate (DHA; 22:6n3)",
                    "docosapentaenoate (n3 DPA; 22:5n3)",
                    "docosapentaenoate (n6 DPA; 22:5n6)",
                    "docosatrienoate (22:3n3)",
                    "docosatrienoate (22:3n6)*",
                    "eicosapentaenoate (EPA; 20:5n3)",
                    "hexadecadienoate (16:2n6)",
                    "linoleate (18:2n6)",
                    "linolenate [alpha or gamma; (18:3n3 or 6)]",
                    "mead acid (20:3n9)",
                    "nisinate (24:6n3)",
                    "stearidonate (18:4n3)",
                    "tetradecadienoate (14:2)*"
                ],
                "Fatty Acid Metabolism (Acyl Carnitine, Polyunsaturated)": [
                    "adrenoylcarnitine (C22:4)*",
                    "arachidonoylcarnitine (C20:4)",
                    "dihomo-linolenoylcarnitine (C20:3n3 or 6)*",
                    "dihomo-linoleoylcarnitine (C20:2)*",
                    "docosapentaenoylcarnitine (C22:5n3)*",
                    "linolenoylcarnitine (C18:3)*",
                    "linoleoylcarnitine (C18:2)*"
                ],
                "Long Chain Saturated Fatty Acid": [
                    "arachidate (20:0)",
                    "margarate (17:0)",
                    "myristate (14:0)",
                    "nonadecanoate (19:0)",
                    "palmitate (16:0)",
                    "pentadecanoate (15:0)",
                    "stearate (18:0)"
                ],
                "Endocannabinoid": [
                    "arachidonoyl ethanolamide",
                    "N-oleoyltaurine",
                    "oleoyl ethanolamide",
                    "palmitoyl ethanolamide",
                    "stearoyl ethanolamide"
                ],
                "Fatty Acid Metabolism (Acyl Choline)": [
                    "arachidonoylcholine",
                    "dihomo-linolenoyl-choline",
                    "docosahexaenoylcholine",
                    "linoleoylcholine*",
                    "oleoylcholine",
                    "palmitoylcholine",
                    "stearoylcholine*"
                ],
                "Fatty Acid Metabolism (Acyl Carnitine, Long Chain Saturated)": [
                    "arachidoylcarnitine (C20)*",
                    "behenoylcarnitine (C22)*",
                    "cerotoylcarnitine (C26)*",
                    "lignoceroylcarnitine (C24)*",
                    "margaroylcarnitine (C17)*",
                    "myristoylcarnitine (C14)",
                    "palmitoylcarnitine (C16)",
                    "stearoylcarnitine (C18)"
                ],
                "Fatty Acid Metabolism (also BCAA Metabolism)": [
                    "butyrylcarnitine (C4)",
                    "butyrylglycine",
                    "methylmalonate (MMA)",
                    "propionylcarnitine (C3)",
                    "propionylglycine"
                ],
                "Carnitine Metabolism": [
                    "carnitine",
                    "deoxycarnitine"
                ],
                "Primary Bile Acid Metabolism": [
                    "chenodeoxycholate",
                    "cholate",
                    "glyco-beta-muricholate**",
                    "glycochenodeoxycholate",
                    "glycochenodeoxycholate 3-sulfate",
                    "glycochenodeoxycholate glucuronide (1)",
                    "glycocholate",
                    "taurochenodeoxycholate",
                    "taurocholate"
                ],
                "Inositol Metabolism": [
                    "chiro-inositol",
                    "myo-inositol"
                ],
                "Phospholipid Metabolism": [
                    "choline",
                    "choline phosphate",
                    "glycerophosphoethanolamine",
                    "glycerophosphoinositol*",
                    "glycerophosphorylcholine (GPC)",
                    "phosphoethanolamine",
                    "trimethylamine N-oxide"
                ],
                "Corticosteroids": [
                    "cortisol",
                    "cortisone",
                    "cortolone glucuronide (1)"
                ],
                "Fatty Acid Metabolism (Acyl Carnitine, Medium Chain)": [
                    "decanoylcarnitine (C10)",
                    "hexanoylcarnitine (C6)",
                    "laurylcarnitine (C12)",
                    "nonanoylcarnitine (C9)",
                    "octanoylcarnitine (C8)"
                ],
                "Secondary Bile Acid Metabolism": [
                    "deoxycholate",
                    "glycocholenate sulfate*",
                    "glycodeoxycholate",
                    "glycodeoxycholate 3-sulfate",
                    "glycodeoxycholate glucuronide (1)",
                    "glycolithocholate",
                    "glycolithocholate sulfate*",
                    "glycoursodeoxycholate",
                    "hyocholate",
                    "isoursodeoxycholate",
                    "lithocholate sulfate (1)",
                    "lithocholic acid sulfate (2)",
                    "taurochenodeoxycholic acid 3-sulfate",
                    "taurocholenate sulfate*",
                    "taurodeoxycholate",
                    "taurodeoxycholic acid 3-sulfate",
                    "taurolithocholate 3-sulfate",
                    "tauroursodeoxycholate",
                    "ursodeoxycholate"
                ],
                "Glycerolipid Metabolism": [
                    "glycerol",
                    "glycerol 3-phosphate",
                    "glycerophosphoglycerol"
                ],
                "Fatty Acid Metabolism (Acyl Glutamine)": [
                    "hexanoylglutamine"
                ],
                "Ceramide PEs": [
                    "palmitoyl-sphingosine-phosphoethanolamine (d18:1/16:0)"
                ],
                "Short Chain Fatty Acid": [
                    "pentoic acid*"
                ],
                "Sphingolipid Synthesis": [
                    "sphingadienine",
                    "sphinganine",
                    "sphinganine-1-phosphate"
                ],
                "Sphingosines": [
                    "sphingosine",
                    "sphingosine 1-phosphate"
                ]
            },
            "Xenobiotics": {
                "Chemical": [
                    "1,2,3-benzenetriol sulfate (2)",
                    "2-acrylamidoglycolic acid",
                    "2-aminophenol sulfate",
                    "2-hydroxy-5-methylpyridine sulfate",
                    "2-methoxyresorcinol sulfate",
                    "3-hydroxypyridine glucuronide",
                    "3-hydroxypyridine sulfate",
                    "4-hydroxychlorothalonil",
                    "4-methylbenzenesulfonate",
                    "6-acetylglucose",
                    "6-hydroxyindole sulfate",
                    "benzoylcarnitine*",
                    "dexpanthenol",
                    "dimethyl sulfone",
                    "ectoine",
                    "EDTA",
                    "ethylparaben sulfate",
                    "iminodiacetate (IDA)",
                    "O-sulfo-L-tyrosine",
                    "perfluorooctanesulfonate (PFOS)",
                    "perfluorooctanoate (PFOA)",
                    "succinimide",
                    "sulfate*",
                    "thioproline"
                ],
                "Xanthine Metabolism": [
                    "1,3,7-trimethylurate",
                    "1,3-dimethylurate",
                    "1,7-dimethylurate",
                    "1-methylurate",
                    "1-methylxanthine",
                    "3-methylxanthine",
                    "5-acetylamino-6-amino-3-methyluracil",
                    "5-acetylamino-6-formylamino-3-methyluracil",
                    "7-methylurate",
                    "7-methylxanthine",
                    "caffeine",
                    "paraxanthine",
                    "theobromine",
                    "theophylline"
                ],
                "Food Component/Plant": [
                    "1,6-anhydroglucose",
                    "2,3-dihydroxyisovalerate",
                    "2-isopropylmalate",
                    "2-keto-3-deoxy-gluconate",
                    "2-piperidinone",
                    "3,4-methyleneheptanoate",
                    "3-ethylcatechol sulfate (1)",
                    "3-formylindole",
                    "3-hydroxystachydrine*",
                    "4-allylphenol sulfate",
                    "4-vinylguaiacol sulfate",
                    "5-hydroxymethyl-2-furoylcarnitine*",
                    "acesulfame",
                    "alliin",
                    "beta-guanidinopropanoate",
                    "betonicine",
                    "caffeic acid sulfate",
                    "cinnamoylglycine",
                    "dihydrocaffeate sulfate (2)",
                    "dihydroferulate",
                    "ergothioneine",
                    "erythritol",
                    "ethyl alpha-glucopyranoside",
                    "eugenol sulfate",
                    "ferulic acid 4-sulfate",
                    "gluconate",
                    "glucuronide of piperine metabolite C17H21NO3 (3)*",
                    "glucuronide of piperine metabolite C17H21NO3 (4)*",
                    "glucuronide of piperine metabolite C17H21NO3 (5)*",
                    "homostachydrine*",
                    "indolin-2-one",
                    "levulinate (4-oxovalerate)",
                    "levulinoylcarnitine",
                    "mannonate*",
                    "methyl glucopyranoside (alpha + beta)",
                    "methyl indole-3-acetate",
                    "N-(2-furoyl)glycine",
                    "N-acetylalliin",
                    "phytanate",
                    "piperine",
                    "pyrraline",
                    "quinate",
                    "S-allylcysteine",
                    "saccharin",
                    "solanidine",
                    "stachydrine",
                    "sulfate of piperine metabolite C16H19NO3 (2)*",
                    "sulfate of piperine metabolite C16H19NO3 (3)*",
                    "sulfate of piperine metabolite C18H21NO3 (1)*",
                    "sulfate of piperine metabolite C18H21NO3 (3)*",
                    "tartarate",
                    "tartronate (hydroxymalonate)",
                    "theanine",
                    "thymol sulfate"
                ],
                "Drug - Other": [
                    "1-hydroxy-2-naphthalenecarboxylate"
                ],
                "Drug - Cardiovascular": [
                    "10-hydroxywarfarin",
                    "4-hydroxycoumarin",
                    "7-hydroxywarfarin",
                    "alpha-hydroxymetoprolol",
                    "atenolol",
                    "chlorthalidone",
                    "furosemide",
                    "hydrochlorothiazide",
                    "metoprolol",
                    "metoprolol acid metabolite*",
                    "olmesartan",
                    "triamterene",
                    "valsartan",
                    "warfarin"
                ],
                "Bacterial/Fungal": [
                    "1H-indole-7-acetic acid",
                    "lactobacillic acid",
                    "N-methylpipecolate"
                ],
                "Drug - Topical Agents": [
                    "2,6-dihydroxybenzoic acid",
                    "hydroquinone sulfate",
                    "salicylate"
                ],
                "Drug - Analgesics, Anesthetics": [
                    "2-acetamidophenol sulfate",
                    "2-hydroxyacetaminophen sulfate*",
                    "2-hydroxyibuprofen",
                    "2-methoxyacetaminophen glucuronide*",
                    "2-methoxyacetaminophen sulfate*",
                    "3-(cystein-S-yl)acetaminophen*",
                    "3-(methylthio)acetaminophen sulfate*",
                    "3-(N-acetyl-L-cystein-S-yl) acetaminophen",
                    "4-acetamidophenol",
                    "4-acetamidophenylglucuronide",
                    "4-acetaminophen sulfate",
                    "4-aminophenol sulfate (2)",
                    "carboxyibuprofen",
                    "carboxyibuprofen glucuronide*",
                    "desmethylnaproxen",
                    "desmethylnaproxen sulfate",
                    "ibuprofen",
                    "ibuprofen acyl glucuronide",
                    "lidocaine",
                    "N-desmethyl tramadol",
                    "N-ethylglycinexylidide",
                    "naproxen",
                    "O-desmethyltramadol",
                    "O-desmethyltramadol glucuronide",
                    "salicyluric glucuronide*",
                    "tramadol"
                ],
                "Benzoate Metabolism": [
                    "2-hydroxyhippurate (salicylurate)",
                    "3-(3-hydroxyphenyl)propionate",
                    "3-(3-hydroxyphenyl)propionate sulfate",
                    "3-hydroxyhippurate",
                    "3-hydroxyhippurate sulfate",
                    "3-methoxycatechol sulfate (1)",
                    "3-methoxycatechol sulfate (2)",
                    "3-methyl catechol sulfate (1)",
                    "4-ethylcatechol sulfate",
                    "4-ethylphenylsulfate",
                    "4-hydroxybenzoate",
                    "4-hydroxyhippurate",
                    "4-methylcatechol sulfate",
                    "4-methylguaiacol sulfate",
                    "4-vinylphenol sulfate",
                    "benzoate",
                    "catechol sulfate",
                    "guaiacol sulfate",
                    "hippurate",
                    "methyl-4-hydroxybenzoate",
                    "methyl-4-hydroxybenzoate sulfate",
                    "o-cresol sulfate",
                    "p-cresol sulfate",
                    "propyl 4-hydroxybenzoate"
                ],
                "Drug - Neurological": [
                    "2-propyl-2-pentenoate (2-ene-valproate)",
                    "2-propyl-4-pentenoate (4-ene-valproate)",
                    "3-hydroxyvalproate",
                    "gabapentin",
                    "lamotrigine",
                    "pregabalin",
                    "valproate",
                    "valproic acid glucuronide"
                ],
                "Tobacco Metabolite": [
                    "3-hydroxycotinine glucuronide",
                    "cotinine",
                    "cotinine N-oxide",
                    "hydroxycotinine",
                    "norcotinine",
                    "nornicotine"
                ],
                "Drug - Antibiotic": [
                    "azithromycin",
                    "linezolid",
                    "N4-acetylsulfamethoxazole*",
                    "sulfamethoxazole"
                ],
                "Drug - Respiratory": [
                    "cetirizine",
                    "diphenhydramine",
                    "fexofenadine",
                    "guaifenesin",
                    "pseudoephedrine"
                ],
                "Drug - Psychoactive": [
                    "escitalopram",
                    "hydroxybupropion",
                    "maprotiline",
                    "O-desmethylvenlafaxine",
                    "trazadone",
                    "venlafaxine",
                    "zolpidem"
                ],
                "Drug - Gastrointestinal": [
                    "famotidine",
                    "omeprazole",
                    "ondansetron",
                    "pantoprazole",
                    "ranitidine",
                    "ranitidine N-oxide*"
                ],
                "Drug - Metabolic": [
                    "metformin",
                    "oxypurinol"
                ],
                "Drug - Antiviral": [
                    "nelfinavir"
                ]
            },
            "Carbohydrate": {
                "Glycolysis, Gluconeogenesis, and Pyruvate Metabolism": [
                    "1,5-anhydroglucitol (1,5-AG)",
                    "3-phosphoglycerate",
                    "glucose",
                    "glycerate",
                    "lactate",
                    "pyruvate"
                ],
                "Pentose Metabolism": [
                    "arabinose",
                    "arabitol/xylitol",
                    "arabonate/xylonate",
                    "ribitol",
                    "ribonate",
                    "ribulonate/xylulonate/lyxonate*",
                    "sedoheptulose",
                    "xylose"
                ],
                "Aminosugar Metabolism": [
                    "erythronate*",
                    "glucuronate",
                    "N-acetylglucosamine/N-acetylgalactosamine",
                    "N-acetylglucosaminylasparagine",
                    "N-acetylneuraminate"
                ],
                "Fructose, Mannose and Galactose Metabolism": [
                    "fructose",
                    "galactonate",
                    "mannitol/sorbitol",
                    "mannose"
                ],
                "Disaccharides and Oligosaccharides": [
                    "lactose",
                    "sucrose"
                ],
                "Glycogen Metabolism": [
                    "maltose"
                ]
            },
            "Amino Acid": {
                "Phenylalanine Metabolism": [
                    "1-carboxyethylphenylalanine",
                    "4-hydroxyphenylacetate",
                    "N-acetylphenylalanine",
                    "phenylacetate",
                    "phenylalanine",
                    "phenyllactate (PLA)",
                    "phenylpyruvate"
                ],
                "Leucine, Isoleucine and Valine Metabolism": [
                    "1-carboxyethylvaline",
                    "2,3-dihydroxy-2-methylbutyrate",
                    "2-hydroxy-3-methylvalerate",
                    "2-ketocaprylate",
                    "2-methylbutyrylcarnitine (C5)",
                    "2-methylbutyrylglycine",
                    "3-hydroxy-2-ethylpropionate",
                    "3-hydroxyisobutyrate",
                    "3-methyl-2-oxobutyrate",
                    "3-methyl-2-oxovalerate",
                    "3-methylcrotonylglycine",
                    "3-methylglutaconate",
                    "3-methylglutarylcarnitine (2)",
                    "4-methyl-2-oxopentanoate",
                    "alpha-hydroxyisocaproate",
                    "alpha-hydroxyisovalerate",
                    "beta-hydroxyisovalerate",
                    "ethylmalonate",
                    "isobutyrylcarnitine (C4)",
                    "isobutyrylglycine",
                    "isoleucine",
                    "isovalerate (i5:0)",
                    "isovalerylcarnitine (C5)",
                    "isovalerylglycine",
                    "leucine",
                    "methylsuccinate",
                    "methylsuccinoylcarnitine",
                    "N-acetylisoleucine",
                    "N-acetylleucine",
                    "N-acetylvaline",
                    "tigloylglycine",
                    "tiglylcarnitine (C5:1-DC)",
                    "valine"
                ],
                "Histidine Metabolism": [
                    "1-methyl-4-imidazoleacetate",
                    "1-methyl-5-imidazoleacetate",
                    "1-methylhistamine",
                    "1-methylhistidine",
                    "1-ribosyl-imidazoleacetate*",
                    "3-methylhistidine",
                    "4-imidazoleacetate",
                    "cis-urocanate",
                    "formiminoglutamate",
                    "histidine",
                    "hydantoin-5-propionate",
                    "imidazole lactate",
                    "imidazole propionate",
                    "N-acetyl-1-methylhistidine*",
                    "N-acetyl-3-methylhistidine*",
                    "N-acetylcarnosine",
                    "N-acetylhistidine",
                    "trans-urocanate"
                ],
                "Guanidino and Acetamido Metabolism": [
                    "1-methylguanidine",
                    "4-guanidinobutanoate",
                    "guanidinosuccinate"
                ],
                "Methionine, Cysteine, SAM and Taurine Metabolism": [
                    "2,3-dihydroxy-5-methylthio-4-pentenoate (DMTPA)*",
                    "5-methylthioribose**",
                    "alpha-ketobutyrate",
                    "cystathionine",
                    "cysteine",
                    "cysteine s-sulfate",
                    "cysteine sulfinic acid",
                    "cystine",
                    "hypotaurine",
                    "lanthionine",
                    "methionine",
                    "methionine sulfone",
                    "methionine sulfoxide",
                    "N-acetylmethionine",
                    "N-acetyltaurine",
                    "N-formylmethionine",
                    "N-methyltaurine",
                    "S-methylcysteine",
                    "S-methylcysteine sulfoxide",
                    "taurine"
                ],
                "Lysine Metabolism": [
                    "2-aminoadipate",
                    "5-(galactosylhydroxy)-L-lysine",
                    "5-hydroxylysine",
                    "6-oxopiperidine-2-carboxylate",
                    "fructosyllysine",
                    "glutarylcarnitine (C5-DC)",
                    "hydroxy-N6,N6,N6-trimethyllysine*",
                    "lysine",
                    "N,N,N-trimethyl-5-aminovalerate",
                    "N2-acetyl,N6,N6-dimethyllysine",
                    "N2-acetyl,N6-methyllysine",
                    "N2-acetyllysine",
                    "N6,N6,N6-trimethyllysine",
                    "N6,N6-dimethyllysine",
                    "N6-acetyllysine",
                    "N6-methyllysine",
                    "pipecolate"
                ],
                "Glutathione Metabolism": [
                    "2-aminobutyrate",
                    "2-hydroxybutyrate/2-hydroxyisobutyrate",
                    "5-oxoproline",
                    "cys-gly, oxidized",
                    "cysteine-glutathione disulfide",
                    "cysteinylglycine",
                    "cysteinylglycine disulfide*"
                ],
                "Glycine, Serine and Threonine Metabolism": [
                    "2-methylserine",
                    "allo-threonine",
                    "betaine",
                    "dimethylglycine",
                    "glycine",
                    "N-acetylglycine",
                    "N-acetylserine",
                    "N-acetylthreonine",
                    "sarcosine",
                    "serine",
                    "threonine"
                ],
                "Urea cycle; Arginine and Proline Metabolism": [
                    "2-oxoarginine*",
                    "3-amino-2-piperidone",
                    "argininate*",
                    "arginine",
                    "citrulline",
                    "dimethylarginine (SDMA + ADMA)",
                    "dimethylguanidino valeric acid (DMGV)*",
                    "homoarginine",
                    "homocitrulline",
                    "N,N,N-trimethyl-alanylproline betaine (TMAP)",
                    "N-acetylarginine",
                    "N-acetylcitrulline",
                    "N-acetylproline",
                    "N-alpha-acetylornithine",
                    "N-delta-acetylornithine",
                    "N-methylhydroxyproline**",
                    "N-methylproline",
                    "N-monomethylarginine",
                    "N2,N5-diacetylornithine",
                    "ornithine",
                    "pro-hydroxy-pro",
                    "proline",
                    "trans-4-hydroxyproline",
                    "urea"
                ],
                "Tyrosine Metabolism": [
                    "3-(4-hydroxyphenyl)lactate",
                    "3-methoxytyrosine",
                    "4-hydroxyphenylacetatoylcarnitine",
                    "4-hydroxyphenylpyruvate",
                    "4-methoxyphenol sulfate",
                    "dopamine 3-O-sulfate",
                    "gentisate",
                    "homovanillate (HVA)",
                    "N-acetyltyrosine",
                    "p-cresol glucuronide*",
                    "phenol glucuronide",
                    "phenol sulfate",
                    "thyroxine",
                    "tyramine O-sulfate",
                    "tyrosine",
                    "vanillactate",
                    "vanillic alcohol sulfate",
                    "vanillylmandelate (VMA)"
                ],
                "Tryptophan Metabolism": [
                    "3-hydroxykynurenine",
                    "3-indoxyl sulfate",
                    "5-hydroxyindoleacetate",
                    "6-bromotryptophan",
                    "8-methoxykynurenate",
                    "anthranilate",
                    "C-glycosyltryptophan",
                    "indoleacetate",
                    "indoleacetoylcarnitine*",
                    "indoleacetylglutamine",
                    "indolelactate",
                    "indolepropionate",
                    "indoxyl glucuronide",
                    "kynurenate",
                    "kynurenine",
                    "N-formylanthranilic acid",
                    "picolinate",
                    "serotonin",
                    "tryptophan",
                    "tryptophan betaine",
                    "xanthurenate"
                ],
                "Polyamine Metabolism": [
                    "4-acetamidobutanoate",
                    "5-methylthioadenosine (MTA)",
                    "acisoga",
                    "N('1)-acetylspermidine",
                    "N-acetyl-isoputreanine*",
                    "N-acetylputrescine",
                    "N1,N12-diacetylspermine",
                    "spermidine"
                ],
                "Glutamate Metabolism": [
                    "4-hydroxyglutamate",
                    "alpha-ketoglutaramate*",
                    "beta-citrylglutamate",
                    "carboxyethyl-GABA",
                    "gamma-carboxyglutamate",
                    "glutamate",
                    "glutamine",
                    "N-acetyl-aspartyl-glutamate (NAAG)",
                    "N-acetylglutamate",
                    "N-acetylglutamine",
                    "pyroglutamine*",
                    "S-1-pyrroline-5-carboxylate"
                ],
                "Alanine and Aspartate Metabolism": [
                    "alanine",
                    "asparagine",
                    "aspartate",
                    "hydroxyasparagine**",
                    "N,N-dimethylalanine",
                    "N-acetylalanine",
                    "N-acetylaspartate (NAA)",
                    "N-carbamoylalanine",
                    "N-methylalanine"
                ],
                "Creatine Metabolism": [
                    "creatine",
                    "creatinine",
                    "guanidinoacetate"
                ]
            },
            "Cofactors and Vitamins": {
                "Nicotinate and Nicotinamide Metabolism": [
                    "1-methylnicotinamide",
                    "adenosine 5'-diphosphoribose (ADP-ribose)",
                    "N1-Methyl-2-pyridone-5-carboxamide",
                    "nicotinamide",
                    "nicotinamide riboside",
                    "quinolinate",
                    "trigonelline (N'-methylnicotinate)"
                ],
                "Tocopherol Metabolism": [
                    "alpha-CEHC sulfate",
                    "alpha-tocopherol",
                    "delta-tocopherol",
                    "gamma-CEHC",
                    "gamma-CEHC glucuronide*",
                    "gamma-tocopherol/beta-tocopherol"
                ],
                "Vitamin A Metabolism": [
                    "beta-cryptoxanthin",
                    "carotene diol (1)",
                    "carotene diol (2)",
                    "carotene diol (3)",
                    "retinal",
                    "retinol (Vitamin A)"
                ],
                "Hemoglobin and Porphyrin Metabolism": [
                    "bilirubin (E,E)*",
                    "bilirubin (E,Z or Z,E)*",
                    "bilirubin (Z,Z)",
                    "biliverdin",
                    "heme",
                    "L-urobilin"
                ],
                "Ascorbate and Aldarate Metabolism": [
                    "gulonate*",
                    "oxalate (ethanedioate)",
                    "threonate"
                ],
                "Pantothenate and CoA Metabolism": [
                    "pantoate",
                    "pantothenate"
                ],
                "Vitamin B6 Metabolism": [
                    "pyridoxate"
                ],
                "Riboflavin Metabolism": [
                    "riboflavin (Vitamin B2)"
                ]
            },
            "Nucleotide": {
                "Pyrimidine Metabolism, Uracil containing": [
                    "2'-deoxyuridine",
                    "3-(3-amino-3-carboxypropyl)uridine*",
                    "3-ureidopropionate",
                    "5,6-dihydrouracil",
                    "5,6-dihydrouridine",
                    "5-methyluridine (ribothymidine)",
                    "beta-alanine",
                    "N-acetyl-beta-alanine",
                    "pseudouridine",
                    "uracil",
                    "uridine",
                    "uridine 3'-monophosphate (3'-UMP)",
                    "uridine 5'-monophosphate (UMP)"
                ],
                "Pyrimidine Metabolism, Cytidine containing": [
                    "2'-O-methylcytidine",
                    "3-methylcytidine",
                    "cytidine",
                    "cytidine 5'-monophosphate (5'-CMP)",
                    "cytosine",
                    "N4-acetylcytidine"
                ],
                "Pyrimidine Metabolism, Thymine containing": [
                    "3-aminoisobutyrate",
                    "5,6-dihydrothymine",
                    "thymine"
                ],
                "Purine Metabolism, Guanine containing": [
                    "7-methylguanine",
                    "N2,N2-dimethylguanosine"
                ],
                "Purine Metabolism, Adenine containing": [
                    "adenine",
                    "adenosine 5'-monophosphate (AMP)",
                    "N1-methyladenosine",
                    "N6-carbamoylthreonyladenosine",
                    "N6-succinyladenosine"
                ],
                "Purine Metabolism, (Hypo)Xanthine/Inosine containing": [
                    "allantoin",
                    "hypoxanthine",
                    "inosine",
                    "N1-methylinosine",
                    "urate",
                    "xanthine",
                    "xanthosine"
                ],
                "Pyrimidine Metabolism, Orotate containing": [
                    "dihydroorotate",
                    "orotate",
                    "orotidine"
                ]
            },
            "Energy": {
                "TCA Cycle": [
                    "2-methylcitrate/homocitrate",
                    "aconitate [cis or trans]",
                    "alpha-ketoglutarate",
                    "citraconate/glutaconate",
                    "citrate",
                    "fumarate",
                    "isocitrate",
                    "isocitric lactone",
                    "malate",
                    "succinate",
                    "succinylcarnitine (C4-DC)"
                ],
                "Oxidative Phosphorylation": [
                    "phosphate"
                ]
            },
            "Peptide": {
                "Acetylated Peptides": [
                    "4-hydroxyphenylacetylglutamine",
                    "phenylacetylcarnitine",
                    "phenylacetylglutamate",
                    "phenylacetylglutamine"
                ],
                "Dipeptide": [
                    "cyclo(gly-pro)",
                    "leucylalanine",
                    "phenylalanylglycine",
                    "prolylglycine",
                    "valylglycine"
                ],
                "Fibrinogen Cleavage Peptide": [
                    "Fibrinopeptide A*",
                    "Fibrinopeptide A, des-ala(1)*",
                    "Fibrinopeptide A, phosphono-ser(3)*",
                    "Fibrinopeptide B (1-13)**"
                ],
                "Gamma-glutamyl Amino Acid": [
                    "gamma-glutamyl-alpha-lysine",
                    "gamma-glutamyl-epsilon-lysine",
                    "gamma-glutamylalanine",
                    "gamma-glutamylcitrulline*",
                    "gamma-glutamylglutamate",
                    "gamma-glutamylglutamine",
                    "gamma-glutamylglycine",
                    "gamma-glutamylhistidine",
                    "gamma-glutamylisoleucine*",
                    "gamma-glutamylleucine",
                    "gamma-glutamylmethionine",
                    "gamma-glutamylphenylalanine",
                    "gamma-glutamylthreonine",
                    "gamma-glutamyltyrosine",
                    "gamma-glutamylvaline"
                ]
            },
            "Partially Characterized Molecules": {
                "Partially Characterized Molecules": [
                    "glucuronide of C10H18O2 (1)*",
                    "glucuronide of C10H18O2 (7)*",
                    "glycine conjugate of C10H14O2 (1)*",
                    "metabolonic lactone sulfate"
                ]
            }
        };

        function clear_metabolite_select(unselect=true){ //hides everythin gin metabolite select and unselects if selected
            for (let sup_path_opt_group of document.getElementById("select_metabolite").children) {
                sup_path_opt_group.hidden = true;

                for (let sub_path_or_metab_opt of sup_path_opt_group.children) {
                    sub_path_or_metab_opt.hidden = true;
                }
            }
            if (unselect) {
                let metab_select = document.getElementById("select_metabolite");
                let selected_metab_ind = metab_select.selectedIndex;
                if (selected_metab_ind != -1) { //if metabolite selected, unselect it
                    metab_select.options[selected_metab_ind].selected = false; 
                }
            }
        }

        function narrow_selection_to_super_path(sup_path) { //make this unselect subpath
            clear_metabolite_select();
            let sup_path_cat_element = document.getElementById(sup_path + " category"); //set selected super path to be not hidden as well as its subpaths and metabolites
            sup_path_cat_element.hidden = false;
            for (let selected_sub_path_or_metab of sup_path_cat_element.children) {
                selected_sub_path_or_metab.hidden = false;
            }

            for (let sup_path in metabolite_dict) { // hide all in sub path selection; next loop unhides selected subpaths
                for (let sub_path in metabolite_dict[sup_path]) {
                    document.getElementById(sub_path).hidden = true;
                    document.getElementById(sub_path).selected = false;
                }
            }

            for (let sub_path in metabolite_dict[sup_path]) { //could also combine this with above loop with conditional
                document.getElementById(sub_path).hidden = false;
            }
        }

        function reset_super_path() {
            for (let sup_path_opt_group of document.getElementById("select_metabolite").children) { //unhide everything in metabolite selection
                sup_path_opt_group.hidden = false;
                for (let sub_path_or_metab_opt of sup_path_opt_group.children) {
                    sub_path_or_metab_opt.hidden = false;
                }
            }
            for (let sup_path in metabolite_dict) { //show all in subpath select
                for (let sub_path in metabolite_dict[sup_path]) {
                    document.getElementById(sub_path).hidden = false;
                    document.getElementById(sub_path).selected = false; //also unselect subpaths
                }
            }
        }

        function narrow_selection_to_sub_path(super_path, sub_path) {
            narrow_selection_to_super_path(super_path); 
            document.getElementById(super_path).selected = true;  //in case you select sub before super
            document.getElementById(sub_path).selected = true;  //because selecting_super_path unselects subpaths

            super_path_cat_element = document.getElementById(super_path + " category");
            for (let sub_path_or_metab_opt of super_path_cat_element.children) { //hide all members of selected super path
                sub_path_or_metab_opt.hidden = true;
            }

            document.getElementById(sub_path + " category").hidden = false; //unhide selected sub path
            for (let selected_metab of metabolite_dict[super_path][sub_path]) {
                document.getElementById(selected_metab).hidden = false;
            }

        }

        function produce_options() {
            for (let super_path in metabolite_dict) {
                let super_path_node = document.createElement("optgroup");
                super_path_node.label = super_path;
                super_path_node.id = super_path + " category";

                for (let sub_path in metabolite_dict[super_path]) {  //make sure for in loop is ordered
                    let sub_path_node = document.createElement("option");
                    sub_path_node.innerHTML = sub_path;
                    sub_path_node.id = sub_path + " category";
                    sub_path_node.disabled = true; //make the subpath text bold or something
                    super_path_node.appendChild(sub_path_node);
                    
                    for (let metabolite_option of metabolite_dict[super_path][sub_path]) {
                        let metabolite_option_node = document.createElement("option");
                        metabolite_option_node.innerHTML = metabolite_option;
                        metabolite_option_node.id = metabolite_option;
                        metabolite_option_node.value = metabolite_option;  //can alternatively use numerical code or something
                        metabolite_option_node.onclick = function(){ narrow_selection_to_sub_path(super_path, sub_path); this.selected=true;}; //select sub path when selected; also select this option so doesnt get unselected by sup path select
                        super_path_node.appendChild(metabolite_option_node);
                    }

                    let sub_path_select_opt_node = document.createElement("option");
                    sub_path_select_opt_node.innerHTML = sub_path;
                    sub_path_select_opt_node.id = sub_path;
                    sub_path_select_opt_node.value = sub_path;
                    sub_path_select_opt_node.onclick = function(){ narrow_selection_to_sub_path(super_path, sub_path); };
                    document.getElementById("sub_path_select").appendChild(sub_path_select_opt_node);
                }

                document.getElementById("select_metabolite").appendChild(super_path_node);

                let super_path_select_opt_node = document.createElement("option");
                super_path_select_opt_node.innerHTML = super_path;
                super_path_select_opt_node.id = super_path;
                super_path_select_opt_node.value = super_path;
                super_path_select_opt_node.onclick = function(){ narrow_selection_to_super_path(super_path); };
                document.getElementById("super_path_select").appendChild(super_path_select_opt_node);

            }
        }

        function search_metabolite() { //can also make this more forgiving ie use regex, ignore capitalization, etc
            let search = document.getElementById("metab_search_bar").value; 
            
            clear_metabolite_select(unselect=false);
            let selected_super_path = document.getElementById("super_path_select").value; //search within selected fields
            if (selected_super_path && selected_super_path != "All") {
                let selected_sub_path = document.getElementById("sub_path_select").value;
                if (selected_sub_path) {
                    for (let metab of metabolite_dict[selected_super_path][selected_sub_path]) {
                        if (metab.includes(search)) {
                            document.getElementById(metab).hidden = false; //???????Why does this not work????
                            document.getElementById(selected_sub_path + " category").hidden = false;
                            document.getElementById(selected_super_path + " category").hidden = false;
                        }
                    }
                } else {
                    for (let sub_path in metabolite_dict[selected_super_path]) {
                        for (let metab of metabolite_dict[selected_super_path][sub_path]) {
                            if (metab.includes(search)) {
                                document.getElementById(metab).hidden = false;
                                document.getElementById(sub_path + " category").hidden = false; //also show subpath (and superpath)
                                document.getElementById(selected_super_path + " category").hidden = false;
                            }
                        }
                    }
                }
            } else {
                for (let super_path in metabolite_dict) {
                    for (let sub_path in metabolite_dict[super_path]) {
                        for (let metab of metabolite_dict[super_path][sub_path]) {
                            if (metab.includes(search)) {
                                document.getElementById(metab).hidden = false;
                                document.getElementById(sub_path + " category").hidden = false;
                                document.getElementById(super_path + " category").hidden = false;
                            }
                        }
                    }
                }
            }
        }

        function test(test_code){
            document.getElementById("test_element").innerHTML = "TEST" + test_code;
        }

    </script>
{% endblock %}

{% block body_attributes %}
    onload="test('1'); produce_options();"
{% endblock %}

{% block body %}
    <h1>Select a metabolite</h1>

    <label for="super_path_select">Select a Super Pathway: </label>
    <br>
    <select id="super_path_select" size="5">
        <option selected onclick="reset_super_path();">All</option>
    </select>

    <br><br>

    <label for="sub_path_select">Select a Sub Pathway: </label>
    <br>
    <select id="sub_path_select" size="5">
    </select>

    <br><br>
    
    <form action="/query_metabolite" target="_blank" method="post" id="metabolite_search_form">
        <label for="select_metabolite">Select a Metabolite: </label>
        <br>
        <select id="select_metabolite" name="query_metabolite" form="metabolite_search_form" size="10" required>
            
        </select>
        <br>

        <!-- make this search bar narrow down selection options -->
        <label for="metab_search_bar">Search</label> 
        <p>Note: searches within selected categories. Click "All" in Super Pathway selection to reset to all metabolites.</p>
        <input type="text" id="metab_search_bar" name="metab_search_bar" oninput="search_metabolite();" onclick="search_metabolite();">

        <!-- could make type=search -->
        <br><br>

        <button type="submit">Submit</button>
    </form>
    <br>
    
    <p id="test_element"></p>
    

{% endblock %}

